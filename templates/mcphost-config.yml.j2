# MCPHost configuration
# Generated by ollama_mcphost role on {{ ansible_date_time.iso8601 }}

# Model configuration - using local Ollama
model: "ollama:{{ ollama_model }}"
provider-url: "http://{{ ollama_host }}:{{ ollama_service_port }}"

# Generation parameters
max-tokens: {{ max_tokens }}
temperature: {{ temperature }}
top-p: {{ top_p }}
top-k: {{ top_k }}
stream: {{ enable_streaming | lower }}

# Agent configuration
max-steps: {{ max_steps }}
debug: {{ enable_debug | lower }}

# MCP Servers
mcpServers:
{% if mcp_servers | length > 0 %}
{% for server in mcp_servers %}
  {{ server.name }}:
    type: "local"
    command: ["python3", "{{ server.path }}"]
    environment:
      PYTHONUNBUFFERED: "1"
{% if server.project_root is defined and server.project_root != "" %}
      ANSIBLE_LIBRARY: "{{ server.project_root }}/ansible_plugins/modules"
{% endif %}
{% if server.env is defined %}
{% for key, value in server.env.items() %}
      {{ key }}: "{{ value }}"
{% endfor %}
{% endif %}
    description: "{{ server.description | default('MCP server') }}"
{% endfor %}
{% else %}
  {}
{% endif %}

